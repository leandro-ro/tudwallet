<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>utils.support API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>utils.support</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">import os
from dataclasses import dataclass

import jpype
import json

from .wrapper import create_elliptic_curve_point


@dataclass
class PublicKey:
    &#34;&#34;&#34;This dataclass wraps all information regarding a derived public key.
    It includes its ethereum address, its id and the public key coordinates. &#34;&#34;&#34;
    address: str
    id: int
    x: str
    y: str


@dataclass
class PrivateKey:
    &#34;&#34;&#34;This dataclass wraps all information regarding a derived private key.
        It includes the private key and the id used for deriving.&#34;&#34;&#34;
    key: str
    id: int


def save_dict_to_file(path, data: dict):
    &#34;&#34;&#34;
    Allows to store any dictionary in a file under the given path.
    Note that all values are represented as string. E.g. if a key was 1, it is not &#34;1&#34;

    :param path: the path where the dictionary should be stored at
    :param dict data: the state to be stored
    &#34;&#34;&#34;
    with open(path, &#39;w&#39;) as txt_file:
        json.dump(data, txt_file)
        txt_file.close()


def get_dict_from_file(path) -&gt; dict:
    &#34;&#34;&#34;
    Allows to load any dictionary (that has been stored via save_dict_to_file()) from a file under the given path.
    Note that all values are represented as string. E.g. if a key was 1, it is not &#34;1&#34;

    :param path: the path where the file is located
    :return: the loaded dictionary
    &#34;&#34;&#34;
    with open(path, &#39;r&#39;) as txt_file:
        data = txt_file.readlines()
        return json.loads(data[0])


def get_private_key_from_file(path):
    &#34;&#34;&#34;
    Allows to load a private key from a file under the given path.

    :param path: the path where the private key is located
    :return: the private key as java BigInteger
    &#34;&#34;&#34;
    with open(path, &#39;r&#39;) as key_file:
        data = key_file.readlines()[0]
        key_file.close()

    data = jpype.java.math.BigInteger(data)
    return data


def get_public_key_from_file(path):
    &#34;&#34;&#34;
    Allows to load a public key from a file under the given path.

    :param path: the path where the public key is located
    :return: the private key as a java EllipticCurvePoint
    &#34;&#34;&#34;
    with open(path, &#39;r&#39;) as key_file:
        data = key_file.readlines()
        key_file.close()

    data = create_elliptic_curve_point(data[0].replace(&#39;\n&#39;, &#39;&#39;), data[1])
    return data


def delete_files_in_folder(path):
    &#34;&#34;&#34;
    Deletes everything inside a certain directory given as a path.
    Intended to be used with the overwrite functionality of the wallet.
    Note that also all sub directories are being deleted.
    The result is an empty directory under path.
    Use with caution!

    :param path: the path to the directory which files/directories are to be deleted
    &#34;&#34;&#34;
    for root, dirs, files in os.walk(path):
        for file in files:
            os.remove(os.path.join(root, file))


def find_second_highest_key_in_dict(data: dict[str, str]) -&gt; str:
    &#34;&#34;&#34;
    Finds the second highest key of a dictionary
    Note that the key must be in string format
    Intended to be used to find the last state for session secret key deriving
    Raises an exception if the dictionary is to short to contain a second highest key

    :param data: the dictionary the second highest key should be extracted from
    :return: the second highest key
    &#34;&#34;&#34;
    keys = data.keys()

    if len(keys) &lt;= 1:
        raise Exception(&#34;Only one or less keys in dictionary. There cannot be a second highest value.&#34;)

    keys = [int(key) for key in keys]  # we expect the key to be in string format (due to dict loading/storing)
    keys.sort(reverse=True)  # sort in reverse and take
    return str(keys[1])  # and take second (highest) element. Convert back to string</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="utils.support.delete_files_in_folder"><code class="name flex">
<span>def <span class="ident">delete_files_in_folder</span></span>(<span>path)</span>
</code></dt>
<dd>
<div class="desc"><p>Deletes everything inside a certain directory given as a path.
Intended to be used with the overwrite functionality of the wallet.
Note that also all sub directories are being deleted.
The result is an empty directory under path.
Use with caution!</p>
<p>:param path: the path to the directory which files/directories are to be deleted</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def delete_files_in_folder(path):
    &#34;&#34;&#34;
    Deletes everything inside a certain directory given as a path.
    Intended to be used with the overwrite functionality of the wallet.
    Note that also all sub directories are being deleted.
    The result is an empty directory under path.
    Use with caution!

    :param path: the path to the directory which files/directories are to be deleted
    &#34;&#34;&#34;
    for root, dirs, files in os.walk(path):
        for file in files:
            os.remove(os.path.join(root, file))</code></pre>
</details>
</dd>
<dt id="utils.support.find_second_highest_key_in_dict"><code class="name flex">
<span>def <span class="ident">find_second_highest_key_in_dict</span></span>(<span>data: dict) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Finds the second highest key of a dictionary
Note that the key must be in string format
Intended to be used to find the last state for session secret key deriving
Raises an exception if the dictionary is to short to contain a second highest key</p>
<p>:param data: the dictionary the second highest key should be extracted from
:return: the second highest key</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def find_second_highest_key_in_dict(data: dict[str, str]) -&gt; str:
    &#34;&#34;&#34;
    Finds the second highest key of a dictionary
    Note that the key must be in string format
    Intended to be used to find the last state for session secret key deriving
    Raises an exception if the dictionary is to short to contain a second highest key

    :param data: the dictionary the second highest key should be extracted from
    :return: the second highest key
    &#34;&#34;&#34;
    keys = data.keys()

    if len(keys) &lt;= 1:
        raise Exception(&#34;Only one or less keys in dictionary. There cannot be a second highest value.&#34;)

    keys = [int(key) for key in keys]  # we expect the key to be in string format (due to dict loading/storing)
    keys.sort(reverse=True)  # sort in reverse and take
    return str(keys[1])  # and take second (highest) element. Convert back to string</code></pre>
</details>
</dd>
<dt id="utils.support.get_dict_from_file"><code class="name flex">
<span>def <span class="ident">get_dict_from_file</span></span>(<span>path) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>Allows to load any dictionary (that has been stored via save_dict_to_file()) from a file under the given path.
Note that all values are represented as string. E.g. if a key was 1, it is not "1"</p>
<p>:param path: the path where the file is located
:return: the loaded dictionary</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_dict_from_file(path) -&gt; dict:
    &#34;&#34;&#34;
    Allows to load any dictionary (that has been stored via save_dict_to_file()) from a file under the given path.
    Note that all values are represented as string. E.g. if a key was 1, it is not &#34;1&#34;

    :param path: the path where the file is located
    :return: the loaded dictionary
    &#34;&#34;&#34;
    with open(path, &#39;r&#39;) as txt_file:
        data = txt_file.readlines()
        return json.loads(data[0])</code></pre>
</details>
</dd>
<dt id="utils.support.get_private_key_from_file"><code class="name flex">
<span>def <span class="ident">get_private_key_from_file</span></span>(<span>path)</span>
</code></dt>
<dd>
<div class="desc"><p>Allows to load a private key from a file under the given path.</p>
<p>:param path: the path where the private key is located
:return: the private key as java BigInteger</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_private_key_from_file(path):
    &#34;&#34;&#34;
    Allows to load a private key from a file under the given path.

    :param path: the path where the private key is located
    :return: the private key as java BigInteger
    &#34;&#34;&#34;
    with open(path, &#39;r&#39;) as key_file:
        data = key_file.readlines()[0]
        key_file.close()

    data = jpype.java.math.BigInteger(data)
    return data</code></pre>
</details>
</dd>
<dt id="utils.support.get_public_key_from_file"><code class="name flex">
<span>def <span class="ident">get_public_key_from_file</span></span>(<span>path)</span>
</code></dt>
<dd>
<div class="desc"><p>Allows to load a public key from a file under the given path.</p>
<p>:param path: the path where the public key is located
:return: the private key as a java EllipticCurvePoint</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_public_key_from_file(path):
    &#34;&#34;&#34;
    Allows to load a public key from a file under the given path.

    :param path: the path where the public key is located
    :return: the private key as a java EllipticCurvePoint
    &#34;&#34;&#34;
    with open(path, &#39;r&#39;) as key_file:
        data = key_file.readlines()
        key_file.close()

    data = create_elliptic_curve_point(data[0].replace(&#39;\n&#39;, &#39;&#39;), data[1])
    return data</code></pre>
</details>
</dd>
<dt id="utils.support.save_dict_to_file"><code class="name flex">
<span>def <span class="ident">save_dict_to_file</span></span>(<span>path, data: dict)</span>
</code></dt>
<dd>
<div class="desc"><p>Allows to store any dictionary in a file under the given path.
Note that all values are represented as string. E.g. if a key was 1, it is not "1"</p>
<p>:param path: the path where the dictionary should be stored at
:param dict data: the state to be stored</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def save_dict_to_file(path, data: dict):
    &#34;&#34;&#34;
    Allows to store any dictionary in a file under the given path.
    Note that all values are represented as string. E.g. if a key was 1, it is not &#34;1&#34;

    :param path: the path where the dictionary should be stored at
    :param dict data: the state to be stored
    &#34;&#34;&#34;
    with open(path, &#39;w&#39;) as txt_file:
        json.dump(data, txt_file)
        txt_file.close()</code></pre>
</details>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="utils.support.PrivateKey"><code class="flex name class">
<span>class <span class="ident">PrivateKey</span></span>
<span>(</span><span>key: str, id: int)</span>
</code></dt>
<dd>
<div class="desc"><p>This dataclass wraps all information regarding a derived private key.
It includes the private key and the id used for deriving.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@dataclass
class PrivateKey:
    &#34;&#34;&#34;This dataclass wraps all information regarding a derived private key.
        It includes the private key and the id used for deriving.&#34;&#34;&#34;
    key: str
    id: int</code></pre>
</details>
<h3>Class variables</h3>
<dl>
<dt id="utils.support.PrivateKey.id"><code class="name">var <span class="ident">id</span> : int</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="utils.support.PrivateKey.key"><code class="name">var <span class="ident">key</span> : str</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
<dt id="utils.support.PublicKey"><code class="flex name class">
<span>class <span class="ident">PublicKey</span></span>
<span>(</span><span>address: str, id: int, x: str, y: str)</span>
</code></dt>
<dd>
<div class="desc"><p>This dataclass wraps all information regarding a derived public key.
It includes its ethereum address, its id and the public key coordinates.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@dataclass
class PublicKey:
    &#34;&#34;&#34;This dataclass wraps all information regarding a derived public key.
    It includes its ethereum address, its id and the public key coordinates. &#34;&#34;&#34;
    address: str
    id: int
    x: str
    y: str</code></pre>
</details>
<h3>Class variables</h3>
<dl>
<dt id="utils.support.PublicKey.address"><code class="name">var <span class="ident">address</span> : str</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="utils.support.PublicKey.id"><code class="name">var <span class="ident">id</span> : int</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="utils.support.PublicKey.x"><code class="name">var <span class="ident">x</span> : str</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="utils.support.PublicKey.y"><code class="name">var <span class="ident">y</span> : str</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="utils.support.delete_files_in_folder" href="#utils.support.delete_files_in_folder">delete_files_in_folder</a></code></li>
<li><code><a title="utils.support.find_second_highest_key_in_dict" href="#utils.support.find_second_highest_key_in_dict">find_second_highest_key_in_dict</a></code></li>
<li><code><a title="utils.support.get_dict_from_file" href="#utils.support.get_dict_from_file">get_dict_from_file</a></code></li>
<li><code><a title="utils.support.get_private_key_from_file" href="#utils.support.get_private_key_from_file">get_private_key_from_file</a></code></li>
<li><code><a title="utils.support.get_public_key_from_file" href="#utils.support.get_public_key_from_file">get_public_key_from_file</a></code></li>
<li><code><a title="utils.support.save_dict_to_file" href="#utils.support.save_dict_to_file">save_dict_to_file</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="utils.support.PrivateKey" href="#utils.support.PrivateKey">PrivateKey</a></code></h4>
<ul class="">
<li><code><a title="utils.support.PrivateKey.id" href="#utils.support.PrivateKey.id">id</a></code></li>
<li><code><a title="utils.support.PrivateKey.key" href="#utils.support.PrivateKey.key">key</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="utils.support.PublicKey" href="#utils.support.PublicKey">PublicKey</a></code></h4>
<ul class="">
<li><code><a title="utils.support.PublicKey.address" href="#utils.support.PublicKey.address">address</a></code></li>
<li><code><a title="utils.support.PublicKey.id" href="#utils.support.PublicKey.id">id</a></code></li>
<li><code><a title="utils.support.PublicKey.x" href="#utils.support.PublicKey.x">x</a></code></li>
<li><code><a title="utils.support.PublicKey.y" href="#utils.support.PublicKey.y">y</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>